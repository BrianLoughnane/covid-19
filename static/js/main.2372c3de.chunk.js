(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{172:function(e,t,a){e.exports=a(358)},177:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(52),r=a.n(o),c=(a(177),a(133)),s=a(19),l=a(20),u=a(15),m=a(21),h=a(22),d=a(134),v=a.n(d),f=a(38),p=a(12),b=a(81),k=a.n(b),S=k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e)})),y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={},e}return Object(l.a)(a,[{key:"getColors",value:function(){var e=S(Array.from(this.props.colors)),t={};return this.props.keys.forEach((function(a){return t[a]=e.next().value})),t}},{key:"getMaxValue",value:function(e){var t=0;return e.forEach((function(e){Object.entries(e).forEach((function(e){var a=Object(f.a)(e,2),n=a[0],i=a[1];if("timestamp"!==n){var o=Number(i);o>t&&(t=o)}}))})),t}},{key:"onDotEnter",value:function(e){this.setState({activePoint:e})}},{key:"onDotLeave",value:function(){this.setState({activePoint:null})}},{key:"getTooltip",value:function(){var e=this.state.activePoint;return e?i.a.createElement(p.e,{content:function(){return i.a.createElement("span",null,e.dataKey,": ",e.value)}}):i.a.createElement(p.e,null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.keys,o=this.getColors();return i.a.createElement(p.d,{width:800,height:800,data:a,margin:{top:5,right:20,left:10,bottom:5}},i.a.createElement(p.a,{stroke:"#f5f5f5"}),i.a.createElement(p.f,{dataKey:"timestamp"}),i.a.createElement(p.g,{domain:[0,this.getMaxValue(a)]}),i.a.createElement(p.b,null),this.getTooltip(),n.map((function(t,a){return i.a.createElement(p.c,{activeDot:{onMouseOver:e.onDotEnter.bind(e),onMouseOut:e.onDotLeave.bind(e)},type:"monotone",dataKey:t,stroke:o[t],key:t})})))}}]),a}(i.a.Component);y.defaultProps={colors:["#ff8150","#ffc139","#5dffcf","#3ef1fc","#4ec9ff"]};var E=a(53),g=(a(356),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(u.a)(n)),n.state={locationSelectedValues:e.locationSelectedValues,periodSelectedValue:e.periodSelectedValue},n}return Object(l.a)(a,[{key:"makeLocationOptions",value:function(e){return e.map((function(e){return{key:e}}))}},{key:"makePeriodOption",value:function(e){var t="All time";return 0!==e&&(t="Last ".concat(e," days")),{key:t,value:e}}},{key:"render",value:function(){var e=this,t=[3,7,10,14,21,30,60,0].map(this.makePeriodOption),a=this.makeLocationOptions(this.props.keys);return i.a.createElement("div",null,i.a.createElement("div",{className:"period-selector"},i.a.createElement("div",{className:"clearfix"},i.a.createElement("div",{className:"left"},i.a.createElement("span",null,"Period")),i.a.createElement("div",{className:"right"},i.a.createElement("select",{onChange:function(t){return e.onPeriodChange(t)},value:this.state.periodSelectedValue},t.map((function(e){return i.a.createElement("option",{key:e.key,value:e.value},e.key)})))))),i.a.createElement("div",{className:"location-selector"},i.a.createElement(O,{heading:"Country / State",options:a,onSubmit:function(t){return e.onLocationChange(t)},selectedValues:this.state.locationSelectedValues})))}},{key:"onLocationChange",value:function(e){this.setState({locationSelectedValues:e},this.onSubmit)}},{key:"onPeriodChange",value:function(e){this.setState({periodSelectedValue:Number(e.target.value)},this.onSubmit)}},{key:"onSubmit",value:function(){this.props.onSubmit({period:this.state.periodSelectedValue,locations:this.state.locationSelectedValues})}}]),a}(i.a.Component)),O=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={visible:!1},n.handleInputChange=n.handleInputChange.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t={visible:e.visible};e.options.forEach((function(e){return t[e.key]=!1})),e.selectedValues.forEach((function(e){return t[e]=!0})),this.setState(t)}},{key:"onSubmit",value:function(e){e.preventDefault();var t=!this.state.visible;if(!t){var a=Object.entries(this.state).filter((function(e){var t=Object(f.a)(e,2),a=t[0];return t[1]&&"visible"!==a})).map((function(e){var t=Object(f.a)(e,2),a=t[0];t[1];return a}));this.props.onSubmit(a)}this.setState({visible:t})}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,n=t.checked;this.setState(Object(E.a)({},a,n))}},{key:"render",value:function(){var e=this,t=this.props,a=t.heading,n=t.options,o=this.state.visible?"":"CheckSheet--hidden";return i.a.createElement("div",{className:"CheckSheet"},i.a.createElement("div",{className:"clearfix"},i.a.createElement("div",{className:"left"},i.a.createElement("span",null,a)),i.a.createElement("div",{className:"right"},i.a.createElement("button",{onClick:this.onSubmit},this.state.visible?"Update":"Select Locations"))),i.a.createElement("div",{className:"CheckSheet-container ".concat(o)},n.map((function(t){return i.a.createElement("label",{key:t.key},i.a.createElement("input",{checked:e.state[t.key],name:t.key,onChange:e.handleInputChange,type:"checkbox"}),t.key)}))))}}]),a}(i.a.Component);a(357);function C(e){var t=e[0],a=e[1];return a&&t?"".concat(a," - ").concat(t):a||(t||"???")}var j=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={data:[],keys:[],locations:["Italy","Spain","France","US"],period:30},e.onSubmit=e.onSubmit.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getData(this.state)}},{key:"getData",value:function(e,t){var a=this;window.fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv").then((function(e){return e.text()})).then((function(n){return a.parseRawData(n,e,t)}))}},{key:"parseRawData",value:function(e,t,a){var n=v.a.parse(e).data,i=n[0],o=n.slice(1).sort((function(e,t){return Number(e[i.length-1])-Number(t[i.length-1])})).slice(-200).sort((function(e,t){return C(e).localeCompare(C(t))})),r=4;0!==t.period&&(r=i.length-t.period);var s=i.slice(r),l=new Set,u=new Set(t.locations),m=s.map((function(e,t){var a={timestamp:e};return o.forEach((function(e){var n=C(e);l.add(n),u.has(n)&&(a[n]=e[r+t])})),a}));l=Array.from(l),this.setState(Object(c.a)({},t,{data:m,keys:l}))}},{key:"onSubmit",value:function(e){this.getData(e)}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.keys,n=e.locations,o=e.period;return i.a.createElement("div",{className:"App"},i.a.createElement("h1",{className:"App-Header"},"COVID-19 Deaths"),i.a.createElement("div",{className:"App-Form"},i.a.createElement(g,{periodSelectedValue:o,locationSelectedValues:n,keys:a,onSubmit:this.onSubmit})),i.a.createElement("div",{className:"App-Chart-container"},i.a.createElement("div",null,i.a.createElement(y,{data:t,keys:n}))),i.a.createElement("div",{className:"App-footer"}),i.a.createElement("div",{className:"App-footer about"},"Data: ",i.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"Johns Hopkins CSSE")))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.2372c3de.chunk.js.map