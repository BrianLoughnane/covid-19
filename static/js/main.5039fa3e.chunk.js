(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{190:function(e,t,a){e.exports=a(395)},388:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},395:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(58),o=a.n(c),i=a(161),l=a(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(40),u=a(8),m=a(63),d=a(19),h=a(20),v=a(11),p=a(21),f=a(22),b=a(27),E=a.n(b),y=a(148),g=a.n(y),S=a(91),k=a.n(S),C=a(149),O=a.n(C),w=a(13),N=a(94),j=a.n(N),_=j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e)})),D=(a(388),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={},e}return Object(h.a)(a,[{key:"getColors",value:function(){var e=this.props,t=e.colors,a=e.keys,n=_(Array.from(t)),r={};return a.forEach((function(e){return r[e]=n.next().value})),r}},{key:"getMaxValue",value:function(e){var t=0;return e.forEach((function(e){Object.entries(e).forEach((function(e){var a=Object(u.a)(e,2),n=a[0],r=a[1];if("timestamp"!==n){var c=Number(r);c>t&&(t=c)}}))})),t}},{key:"onDotEnter",value:function(e){this.setState({activePoint:e})}},{key:"onDotLeave",value:function(){this.setState({activePoint:null})}},{key:"getTooltip",value:function(){var e=this.state.activePoint;return e?r.a.createElement(w.f,{content:function(){return r.a.createElement("div",{className:"MyLineChart--custom-tooltip"},r.a.createElement("div",{style:{paddingBottom:"4px"}},e.payload.timestamp),r.a.createElement("span",{style:{color:e.fill}},e.dataKey,": ",e.value))}}):r.a.createElement(w.f,{isAnimationActive:!0,itemSorter:function(e){return-1*Number(e.payload[e.name])}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.keys,c=this.getColors();return r.a.createElement("div",{className:"MyLineChart"},r.a.createElement(w.e,null,r.a.createElement(w.d,{data:a,margin:{top:5,right:20,left:10,bottom:5}},r.a.createElement(w.b,{height:100,wrapperStyle:{paddingBottom:"10px",overflow:"scroll"},verticalAlign:"top"}),r.a.createElement(w.a,{stroke:"#f5f5f5"}),r.a.createElement(w.g,{dataKey:"timestamp"}),r.a.createElement(w.h,{domain:["log"===this.props.scale?"auto":0,this.getMaxValue(a)],scale:this.props.scale}),this.getTooltip(),n.map((function(t,a){return r.a.createElement(w.c,{activeDot:{onMouseOver:e.onDotEnter.bind(e),onMouseOut:e.onDotLeave.bind(e)},dataKey:t,dot:!1,key:t,stroke:c[t],strokeWidth:2,type:"monotone"})})))))}}]),a}(r.a.Component)),x=a(59),V=(a(389),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),n=t.call(this,e);var r={visible:!1,activeTab:"countries"};return e.options.forEach((function(e){return r[e.key]=!1})),e.selectedValues.forEach((function(e){return r[e]=!0})),n.state=r,n.onClickTab=n.onClickTab.bind(Object(v.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.clearSelections=n.clearSelections.bind(Object(v.a)(n)),n}return Object(h.a)(a,[{key:"onSubmit",value:function(e){e.preventDefault();var t=!this.state.visible;if(!t){var a=Object.entries(this.state).filter((function(e){var t=Object(u.a)(e,2),a=t[0];return t[1]&&"visible"!==a&&"activeTab"!==a})).map((function(e){var t=Object(u.a)(e,2),a=t[0];t[1];return a}));this.props.onSubmit(a)}this.setState({visible:t})}},{key:"clearSelections",value:function(){var e={};this.props.options.forEach((function(t){return e[t.key]=!1})),this.setState(e)}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,n=t.checked;this.setState(Object(x.a)({},a,n))}},{key:"onClickTab",value:function(e){this.setState({activeTab:e.target.dataset.name})}},{key:"getOptionsByName",value:function(e){var t={countries:[],states:[],counties:[]};return e.sort((function(e,t){return e.key.localeCompare(t.key)})).forEach((function(e){var a=e.key;if(a)if("US"!==a&&a.startsWith("US")){var n=a.split(" - ").length;2===n?t.states.push(e):3===n&&t.counties.push(e)}else t.countries.push(e)})),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.heading,n=t.options,c=this.state,o=c.activeTab,i=c.visible,l=i?"":"CheckSheet--hidden",s=this.getOptionsByName(n);return r.a.createElement("div",{className:"CheckSheet"},r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"CheckSheet-heading"},a)),r.a.createElement("div",{className:"right"},r.a.createElement("button",{onClick:this.onSubmit},i?"Update":"Select Locations"),i?r.a.createElement("button",{className:"clear-button",onClick:this.clearSelections},"Clear selections"):null)),r.a.createElement("div",{className:l},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"CheckSheet-tab-bar"},[["countries","Countries / Provinces"],["states","U.S. States / Territories"],["counties","U.S. Counties"]].map((function(t){var a=Object(u.a)(t,2),n=a[0],c=a[1];return r.a.createElement("span",{className:"\n                      CheckSheet-tab\n                      ".concat(n===o?"CheckSheet-tab--active":"","\n                    "),"data-name":n,onClick:e.onClickTab,key:"CheckSheet-tab-".concat(n)},c)})))),r.a.createElement("div",{className:"\n            CheckSheet-sheet-container\n            ".concat("counties"===o?"CheckSheet--two-cols":"","\n          ")},["countries","states","counties"].map((function(t){return r.a.createElement("div",{className:"\n                    CheckSheet-sheet\n                    ".concat(t===o?"":"CheckSheet--hidden","\n                  "),key:"CheckSheet-sheet-".concat(t)},s[t].map((function(t){return r.a.createElement("label",{key:t.key},r.a.createElement("input",{checked:e.state[t.key],name:t.key,onChange:e.handleInputChange,type:"checkbox"}),t.key)})))})))))}}]),a}(r.a.Component)),A=(a(390),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={locationSelectedValues:e.locationSelectedValues,periodSelectedValue:e.periodSelectedValue,scaleSelectedValue:e.scaleSelectedValue},n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n}return Object(h.a)(a,[{key:"makeOptions",value:function(e){return e.map((function(e){return{key:e}}))}},{key:"makePeriodOption",value:function(e){var t="All time";return 0!==e&&(t="Last ".concat(e," days")),{key:t,value:e}}},{key:"render",value:function(){var e=this,t=[3,7,10,14,21,30,60,0].map(this.makePeriodOption),a=this.makeOptions(this.props.keys),n=this.makeOptions(["log","linear"]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"left"},r.a.createElement("span",null,"Period")),r.a.createElement("div",{className:"period-selector right"},r.a.createElement("select",{onChange:function(t){return e.onPeriodChange(t)},value:this.state.periodSelectedValue},t.map((function(e){return r.a.createElement("option",{key:e.key,value:e.value},e.key)})))))),r.a.createElement("div",null,r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"left"},r.a.createElement("span",null,"Scale")),r.a.createElement("div",{className:"scale-selector right"},n.map((function(t){return r.a.createElement("label",{key:t.key},r.a.createElement("input",{checked:t.key===e.state.scaleSelectedValue,name:"scale",value:t.key,onChange:function(t){return e.onScaleChange(t)},type:"radio"}),r.a.createElement("span",null,t.key))}))))),r.a.createElement("div",{className:"location-selector"},r.a.createElement(V,{heading:"Country / State",options:a,onSubmit:function(t){return e.onLocationChange(t)},selectedValues:this.props.locationSelectedValues})))}},{key:"onLocationChange",value:function(e){this.setState({locationSelectedValues:e},this.onSubmit)}},{key:"onPeriodChange",value:function(e){this.setState({periodSelectedValue:Number(e.target.value)},this.onSubmit)}},{key:"onScaleChange",value:function(e){this.setState({scaleSelectedValue:e.target.value},this.onSubmit)}},{key:"onSubmit",value:function(){this.props.onSubmit({scale:this.state.scaleSelectedValue,period:this.state.periodSelectedValue,selectedLocations:this.state.locationSelectedValues})}}]),a}(r.a.Component)),T=(a(391),["red","orange","green","blue","purple","violet","#3b3b3b"]),L=_(Array.from(T)),I=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={confirmed:{header:null,rows:{},data:[]},deaths:{header:null,rows:{},data:[]},allLocations:[],selectedLocations:["Italy","Spain","France","US","China - Hubei"],period:0,scale:"log",loading:!0},e.onSubmit=e.onSubmit.bind(Object(v.a)(e)),e}return Object(h.a)(a,[{key:"getDeserializedState",value:function(e){var t,a=e.location.search;if(t=a.indexOf("|")>-1?a.replace(/--/g," - ").replace(/_/g," "):decodeURIComponent(a).replace(/--/g," - ").replace(/_/g," ")){var n={},r=k.a.parse(t,{parseNumbers:!0,arrayFormat:"separator",arrayFormatSeparator:"|"}),c=r.period,o=r.scale,i=r.locations;return void 0!==c&&(n.period=c),void 0!==o&&(n.scale=o),n.selectedLocations=void 0!==i?"string"===typeof i?[i]:i:[],n}}},{key:"getSerializedState",value:function(e){var t=e.selectedLocations.map((function(e){return e.replace(/ - /g,"--").replace(/ /g,"_")}));return"?"+encodeURIComponent(k.a.stringify({period:e.period,scale:e.scale,locations:t},{arrayFormat:"separator",arrayFormatSeparator:"|"}))}},{key:"componentDidMount",value:function(){var e=this,t=this.getDeserializedState(this.props)||{};Promise.all([window.fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv").then((function(e){return e.text()})).then((function(e){return P(e)})).then((function(e){return U(e)})),window.fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv").then((function(e){return e.text()})).then((function(e){return P(e)})).then((function(e){return U(e)})),window.fetch("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv").then((function(e){return e.text()})).then((function(e){return P(e)})).then((function(e){return Y(e)})),window.fetch("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv").then((function(e){return e.text()})).then((function(e){return P(e)})).then((function(e){return Y(e,!0)}))]).then(B).then((function(a){return e.setState(Object.assign(a,t),(function(){return e.navigate(e.state)}))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.getDeserializedState(e);this.updateState(t)}},{key:"updateState",value:function(e){var t=Object(m.a)({},this.state,{},e,{},{loading:!1}),a=t.period,n=t.selectedLocations;["deaths","confirmed"].forEach((function(e){var r=t[e],c=r.header,o=r.rows,i=0;0!==a&&(i=c.length-a);var l=c.slice(i).map((function(e,t){var a={timestamp:e};return n.forEach((function(e){a[e]=o[e][i+t]})),a}));t[e]={data:l,header:c,rows:o}})),this.setState(t)}},{key:"onSubmit",value:function(e){this.navigate(e)}},{key:"navigate",value:function(e){this.props.history.push(this.getSerializedState(e))}},{key:"makeSummary",value:function(e,t,a){return t.data.length&&a.data.length?e.map((function(e){return[e,F(t.rows[e]),F(a.rows[e])]})):[]}},{key:"render",value:function(){var e=this.state,t=e.confirmed,a=e.deaths,n=e.allLocations,c=e.selectedLocations,o=e.period,i=e.scale,l=e.loading,s=c;if(a.data.length){var m=F(a.data,(function(e){return c.map((function(t){return e[t]})).every((function(e){return void 0!==e}))}));s=c.sort((function(e,t){return Number(m[t])-Number(m[e])}))}var d=this.makeSummary(s,a,t);return l?null:r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header image-text"},r.a.createElement("img",{src:"./logo30.png",alt:"Coronavirus"}),r.a.createElement("span",null,"The Coronavirus Curve"),r.a.createElement("a",{href:"https://twitter.com/Covid19Curve",style:{float:"right"},target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Twitter logo",src:"./twitter30.png"}))),r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"App-Header"},"The Coronavirus Curve"),r.a.createElement("div",{className:"App-Form"},r.a.createElement(A,{periodSelectedValue:o,locationSelectedValues:c,scaleSelectedValue:i,keys:n,onSubmit:this.onSubmit})),r.a.createElement("h2",{className:"App-Header"},"Deaths"),r.a.createElement("div",{className:"App-Chart-container"},r.a.createElement("div",null,r.a.createElement(D,{colors:T,data:a.data,keys:s,scale:i}))),r.a.createElement("div",{className:"spacer"}),r.a.createElement("h2",{className:"App-Header"},"Confirmed Cases"),r.a.createElement("div",{className:"App-Chart-container"},r.a.createElement("div",null,r.a.createElement(D,{colors:T,data:t.data,keys:s,scale:i}))),r.a.createElement("div",{className:"spacer"}),r.a.createElement("h2",{className:"App-Header"},"Summary"),r.a.createElement("div",{className:"App-SummaryTable-container"},r.a.createElement("div",{className:"App-SummaryTable"},r.a.createElement("div",null,r.a.createElement("span",null),r.a.createElement("span",null,"Deaths"),r.a.createElement("span",null,"Confirmed Cases")),r.a.createElement("div",null,d.map((function(e){var t=Object(u.a)(e,3),a=t[0],n=t[1],c=t[2];return r.a.createElement("div",{key:"summaryData--".concat(a),style:{color:L.next().value}},r.a.createElement("span",null,a),r.a.createElement("span",null,n),r.a.createElement("span",null,c))}))))),r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{className:"about"},r.a.createElement("div",null,"Data: "),r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19",target:"_blank",rel:"noopener noreferrer"},"Johns Hopkins CSSE")),r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/nytimes/covid-19-data",target:"_blank",rel:"noopener noreferrer"},"The New York Times")," (View the NYT data on their ",r.a.createElement("a",{href:"https://www.nytimes.com/interactive/2020/us/coronavirus-us-cases.html",target:"_blank",rel:"noopener noreferrer"},"interactive tracking page"),")")),r.a.createElement("div",{className:"spacer"}),r.a.createElement("h2",{className:"App-Header"},"Understanding the Data"),r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{className:"center video-wrapper"},r.a.createElement("div",{className:"center video-container"},r.a.createElement("iframe",{src:"https://www.youtube.com/embed/Kas0tIxDvrg",frameBorder:"0",title:"Exponential growth and epidemics",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))),r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{className:"center video-wrapper"},r.a.createElement("div",{className:"center video-container"},r.a.createElement("iframe",{src:"https://www.youtube.com/embed/gxAaO2rsdIs",frameBorder:"0",title:"Simulating an epidemic",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))),r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{className:"about"},"Credit: ",r.a.createElement("a",{href:"https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw",target:"_blank",rel:"noopener noreferrer"},"3Blue1Brown")),r.a.createElement("div",{className:"spacer"}),r.a.createElement("section",{className:"about-this-project"},r.a.createElement("h2",{className:"App-Header"},"About this Project"),r.a.createElement("div",{className:"image-text center"},r.a.createElement("a",{href:"https://twitter.com/Covid19Curve",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Twitter logo",src:"./twitter60.png"}),r.a.createElement("span",null,"Follow on twitter"))),r.a.createElement("div",{className:"image-text center"},r.a.createElement("a",{href:"https://github.com/BrianLoughnane/covid-19",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Octocat GitHub logo",src:"./Octocat.png"}),r.a.createElement("span",null,"Checkout on GitHub")))),r.a.createElement("div",{className:"spacer"})),r.a.createElement("div",{className:"footer"}))}}]),a}(r.a.Component);function M(e,t,a){return e&&t&&a?"".concat(e," - ").concat(t," - ").concat(a):e&&t?"".concat(e," - ").concat(t):e||(t||"")}function P(e){return g.a.parse(e).data}function U(e){var t,a={},n=e[0],r=e.slice(1),c=n.slice(4),o=Object(s.a)(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;a[M(i[1],i[0])]=i.slice(4)}}catch(l){o.e(l)}finally{o.f()}return{timestamps:c,data:a}}function Y(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r={},c=e.slice(1),o=a?4:3,i=a?5:4,l=a?function(e){return M("US",e[2],e[1])}:function(e){return M("US",e[1])},u=new Set,m=new Set,d=Object(s.a)(c);try{for(d.s();!(t=d.n()).done;){var h=t.value,v=E()(h[0],"YYYY-MM-DD").format("M/DD/YY");u.add(v),h[0]=v;var p=l(h);m.add(p),h[1]=p}}catch(_){d.e(_)}finally{d.f()}var f,b=Array.from(u).sort((function(e,t){return e.localeCompare(t)})),y=Object(s.a)(m);try{for(y.s();!(f=y.n()).done;){var g=f.value;n[g]=Array.from({length:b.length},(function(e){return""})),r[g]=Array.from({length:b.length},(function(e){return""}))}}catch(_){y.e(_)}finally{y.f()}var S={};b.forEach((function(e,t){return S[e]=t}));var k,C=Object(s.a)(c);try{for(C.s();!(k=C.n()).done;){var O=k.value,w=O[0],N=O[1],j=S[w];r[N][j]=O[o],n[N][j]=O[i]}}catch(_){C.e(_)}finally{C.f()}return{timestamps:b,deaths:n,confirmed:r}}function B(e){var t,a=Object(u.a)(e,4),n=a[0],r=a[1],c=a[2],o=a[3],i=e.map((function(e){var t=e.timestamps;return[t[0],t[t.length-1]]})).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return[E()(a),E()(n)]})),l=i.reduce((function(e,t){var a=Object(u.a)(e,2),n=a[0],r=a[1],c=Object(u.a)(t,2),o=c[0],i=c[1];return[E.a.max(n,o),E.a.max(r,i)]})),d=Object(u.a)(l,2),h=d[0],v=d[1],p=i.map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return[h.diff(a,"days"),v.diff(n,"days")]})),f=Object(s.a)(O()(e,p));try{var b=function(){for(var e=Object(u.a)(t.value,2),a=e[0],n=a.timestamps,r=a.deaths,c=a.confirmed,o=Object(u.a)(e[1],2),i=o[0],l=o[1],s=0;s<i;s++)n.shift();[r,c].filter((function(e){return e})).forEach((function(e){return Object.values(e).forEach((function(e){for(var t=0;t<i;t++)e.shift()}))}));for(var m=E()(n[n.length-1]),d=0;d<i;d++)n.push(m.add(1,"days").format("M/DD/YY"));[r,c].filter((function(e){return e})).forEach((function(e){return Object.values(e).forEach((function(e){for(var t=0;t<l;t++)e.push(void 0)}))}))};for(f.s();!(t=f.n()).done;)b()}catch(k){f.e(k)}finally{f.f()}var y=e[0].timestamps,g=Object(m.a)({},n.data,{},c.deaths,{},o.deaths),S=Object(m.a)({},r.data,{},c.confirmed,{},o.confirmed);return{allLocations:Object.keys(g),deaths:{rows:g,header:y,data:[]},confirmed:{rows:S,header:y,data:[]}}}function F(e){for(var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e},n=1;!a(t=e[e.length-n]);)n+=1;return t}a(392);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:I}),r.a.createElement(l.a,{to:"/"})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.5039fa3e.chunk.js.map