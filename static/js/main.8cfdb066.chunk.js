(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{189:function(e,t,a){e.exports=a(394)},387:function(e,t,a){},388:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(57),i=a.n(r),o=a(160),s=a(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(23),u=a(43),m=a(62),d=a(18),h=a(19),v=a(10),f=a(20),p=a(21),b=a(147),S=a.n(b),y=a(148),k=a.n(y),E=a(90),g=a.n(E),C=a(12),O=a(93),N=a.n(O),w=N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e)})),j=(a(387),function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={},e}return Object(h.a)(a,[{key:"getColors",value:function(){var e=w(Array.from(this.props.colors)),t={};return this.props.keys.forEach((function(a){return t[a]=e.next().value})),t}},{key:"getMaxValue",value:function(e){var t=0;return e.forEach((function(e){Object.entries(e).forEach((function(e){var a=Object(l.a)(e,2),n=a[0],c=a[1];if("timestamp"!==n){var r=Number(c);r>t&&(t=r)}}))})),t}},{key:"onDotEnter",value:function(e){this.setState({activePoint:e})}},{key:"onDotLeave",value:function(){this.setState({activePoint:null})}},{key:"getTooltip",value:function(){var e=this.state.activePoint;return e?c.a.createElement(C.f,{content:function(){return c.a.createElement("span",null,e.dataKey,": ",e.value)}}):c.a.createElement(C.f,null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.keys,r=this.getColors();return c.a.createElement("div",{className:"MyLineChart"},c.a.createElement(C.e,null,c.a.createElement(C.d,{data:a,margin:{top:5,right:20,left:10,bottom:5}},c.a.createElement(C.b,{wrapperStyle:{paddingBottom:"10px"},verticalAlign:"top"}),c.a.createElement(C.a,{stroke:"#f5f5f5"}),c.a.createElement(C.g,{dataKey:"timestamp"}),c.a.createElement(C.h,{domain:["log"===this.props.scale?"auto":0,this.getMaxValue(a)],scale:this.props.scale}),this.getTooltip(),n.map((function(t,a){return c.a.createElement(C.c,{activeDot:{onMouseOver:e.onDotEnter.bind(e),onMouseOut:e.onDotLeave.bind(e)},dataKey:t,key:t,stroke:r[t],type:"monotone"})})))))}}]),a}(c.a.Component));j.defaultProps={colors:["#ff8150","#ffc139","#5dffcf","#3ef1fc","#4ec9ff"]};var V=a(58),D=(a(388),function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(d.a)(this,a),n=t.call(this,e);var c={visible:!1,activeTab:"countries"};return e.options.forEach((function(e){return c[e.key]=!1})),e.selectedValues.forEach((function(e){return c[e]=!0})),n.state=c,n.onClickTab=n.onClickTab.bind(Object(v.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.clearSelections=n.clearSelections.bind(Object(v.a)(n)),n}return Object(h.a)(a,[{key:"onSubmit",value:function(e){e.preventDefault();var t=!this.state.visible;if(!t){var a=Object.entries(this.state).filter((function(e){var t=Object(l.a)(e,2),a=t[0];return t[1]&&"visible"!==a&&"activeTab"!==a})).map((function(e){var t=Object(l.a)(e,2),a=t[0];t[1];return a}));this.props.onSubmit(a)}this.setState({visible:t})}},{key:"clearSelections",value:function(){var e={};this.props.options.forEach((function(t){return e[t.key]=!1})),this.setState(e)}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,n=t.checked;this.setState(Object(V.a)({},a,n))}},{key:"onClickTab",value:function(e){this.setState({activeTab:e.target.dataset.name})}},{key:"getOptionsByName",value:function(e){var t={countries:[],states:[],counties:[]};return e.sort((function(e,t){return e.key.localeCompare(t.key)})).forEach((function(e){var a=e.key;if(a)if("US"!==a&&a.startsWith("US")){var n=a.split(" - ").length;2===n?t.states.push(e):3===n&&t.counties.push(e)}else t.countries.push(e)})),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.heading,n=t.options,r=this.state,i=r.activeTab,o=r.visible,s=o?"":"CheckSheet--hidden",u=this.getOptionsByName(n);return c.a.createElement("div",{className:"CheckSheet"},c.a.createElement("div",{className:"clearfix"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"CheckSheet-heading"},a)),c.a.createElement("div",{className:"right"},c.a.createElement("button",{onClick:this.onSubmit},o?"Update":"Select Locations"),o?c.a.createElement("button",{className:"clear-button",onClick:this.clearSelections},"Clear selections"):null)),c.a.createElement("div",{className:s},c.a.createElement("div",{className:"center"},c.a.createElement("div",{className:"CheckSheet-tab-bar"},[["countries","Countries / Provinces"],["states","U.S. States / Territories"],["counties","U.S. Counties"]].map((function(t){var a=Object(l.a)(t,2),n=a[0],r=a[1];return c.a.createElement("span",{className:"\n                      CheckSheet-tab\n                      ".concat(n===i?"CheckSheet-tab--active":"","\n                    "),"data-name":n,onClick:e.onClickTab,key:"CheckSheet-tab-".concat(n)},r)})))),c.a.createElement("div",{className:"\n            CheckSheet-sheet-container\n            ".concat("counties"===i?"CheckSheet--two-cols":"","\n          ")},["countries","states","counties"].map((function(t){return c.a.createElement("div",{className:"\n                    CheckSheet-sheet\n                    ".concat(t===i?"":"CheckSheet--hidden","\n                  "),key:"CheckSheet-sheet-".concat(t)},u[t].map((function(t){return c.a.createElement("label",{key:t.key},c.a.createElement("input",{checked:e.state[t.key],name:t.key,onChange:e.handleInputChange,type:"checkbox"}),t.key)})))})))))}}]),a}(c.a.Component)),_=(a(389),function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={locationSelectedValues:e.locationSelectedValues,periodSelectedValue:e.periodSelectedValue,scaleSelectedValue:e.scaleSelectedValue},n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n}return Object(h.a)(a,[{key:"makeOptions",value:function(e){return e.map((function(e){return{key:e}}))}},{key:"makePeriodOption",value:function(e){var t="All time";return 0!==e&&(t="Last ".concat(e," days")),{key:t,value:e}}},{key:"render",value:function(){var e=this,t=[3,7,10,14,21,30,60,0].map(this.makePeriodOption),a=this.makeOptions(this.props.keys),n=this.makeOptions(["log","linear"]);return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",{className:"clearfix"},c.a.createElement("div",{className:"left"},c.a.createElement("span",null,"Period")),c.a.createElement("div",{className:"period-selector right"},c.a.createElement("select",{onChange:function(t){return e.onPeriodChange(t)},value:this.state.periodSelectedValue},t.map((function(e){return c.a.createElement("option",{key:e.key,value:e.value},e.key)})))))),c.a.createElement("div",null,c.a.createElement("div",{className:"clearfix"},c.a.createElement("div",{className:"left"},c.a.createElement("span",null,"Scale")),c.a.createElement("div",{className:"scale-selector right"},n.map((function(t){return c.a.createElement("label",{key:t.key},c.a.createElement("input",{checked:t.key===e.state.scaleSelectedValue,name:"scale",value:t.key,onChange:function(t){return e.onScaleChange(t)},type:"radio"}),t.key)}))))),c.a.createElement("div",{className:"location-selector"},c.a.createElement(D,{heading:"Country / State",options:a,onSubmit:function(t){return e.onLocationChange(t)},selectedValues:this.props.locationSelectedValues})))}},{key:"onLocationChange",value:function(e){this.setState({locationSelectedValues:e},this.onSubmit)}},{key:"onPeriodChange",value:function(e){this.setState({periodSelectedValue:Number(e.target.value)},this.onSubmit)}},{key:"onScaleChange",value:function(e){this.setState({scaleSelectedValue:e.target.value},this.onSubmit)}},{key:"onSubmit",value:function(){this.props.onSubmit({scale:this.state.scaleSelectedValue,period:this.state.periodSelectedValue,selectedLocations:this.state.locationSelectedValues})}}]),a}(c.a.Component)),x=(a(390),function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={confirmed:{header:null,rows:[],data:[]},deaths:{header:null,rows:[],data:[]},allLocations:[],selectedLocations:["Italy","Spain","France","US","China - Hubei"],period:0,scale:"log",loading:!0},e.onSubmit=e.onSubmit.bind(Object(v.a)(e)),e}return Object(h.a)(a,[{key:"getDeserializedState",value:function(e){var t=e.location.search;if(t){var a={},n=g.a.parse(t,{arrayFormat:"comma",parseNumbers:!0}),c=n.period,r=n.scale,i=n.locations;return void 0!==c&&(a.period=c),void 0!==r&&(a.scale=r),a.selectedLocations=void 0!==i?"string"===typeof i?[i]:i:[],a}}},{key:"getSerializedState",value:function(e){return"?"+g.a.stringify({period:e.period,scale:e.scale,locations:e.selectedLocations},{arrayFormat:"comma"})}},{key:"componentDidMount",value:function(){var e=this,t=this.getDeserializedState(this.props);t?this.setState(t,(function(){return U().then((function(t){return e.updateState(t)}))})):U().then((function(t){return e.setState(t,(function(){return e.navigate(e.state)}))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.getDeserializedState(e);this.updateState(t)}},{key:"updateState",value:function(e){var t=Object(m.a)({},this.state,{},e),a=t.period,n=t.selectedLocations;["deaths","confirmed"].forEach((function(e){var c=t[e],r=c.header,i=c.rows,o=0;0!==a&&(o=r.length-a);var s=r.slice(o).map((function(e,t){var a={timestamp:e};return n.forEach((function(e){a[e]=i[e][o+t]})),a}));t[e]={data:s,header:r,rows:i}})),this.setState(t)}},{key:"onSubmit",value:function(e){this.navigate(e)}},{key:"navigate",value:function(e){this.props.history.push(this.getSerializedState(e))}},{key:"render",value:function(){var e=this.state,t=e.confirmed,a=e.deaths,n=e.allLocations,r=e.selectedLocations,i=e.period,o=e.scale;return e.loading?null:c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",{className:"App-Header"},"The Coronavirus Curve"),c.a.createElement("div",{className:"App-Form"},c.a.createElement(_,{periodSelectedValue:i,locationSelectedValues:r,scaleSelectedValue:o,keys:n,onSubmit:this.onSubmit})),c.a.createElement("h2",{className:"App-Header"},"Deaths"),c.a.createElement("div",{className:"App-Chart-container"},c.a.createElement("div",null,c.a.createElement(j,{data:a.data,keys:r,scale:o}))),c.a.createElement("h2",{className:"App-Header"},"Confirmed Cases"),c.a.createElement("div",{className:"App-Chart-container"},c.a.createElement("div",null,c.a.createElement(j,{data:t.data,keys:r,scale:o}))),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"about"},c.a.createElement("div",null,"Data: "),c.a.createElement("div",null,c.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"Johns Hopkins CSSE")),c.a.createElement("div",null,c.a.createElement("a",{href:"https://github.com/nytimes/covid-19-data"},"New York Times"))),c.a.createElement("div",{className:"spacer"}),c.a.createElement("h2",{className:"App-Header"},"Understanding the Data"),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"center video-container"},c.a.createElement("iframe",{src:"https://www.youtube.com/embed/Kas0tIxDvrg",frameBorder:"0",title:"Understanding the data",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"about"},"Credit: ",c.a.createElement("a",{href:"https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw"},"3Blue1Brown")),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"footer"})))}}]),a}(c.a.Component));function A(e,t,a){return e&&t&&a?"".concat(e," - ").concat(t," - ").concat(a):e&&t?"".concat(e," - ").concat(t):e||(t||"")}function L(e){return k.a.parse(e).data}function I(e){var t,a={},n=e[0],c=e.slice(1),r=n.slice(4),i=Object(u.a)(c);try{for(i.s();!(t=i.n()).done;){var o=t.value;a[A(o[1],o[0])]=o.slice(4)}}catch(s){i.e(s)}finally{i.f()}return{timestamps:r,data:a}}function T(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},c={},r=e.slice(1),i=a?4:3,o=a?5:4,s=a?function(e){return A("US",e[2],e[1])}:function(e){return A("US",e[1])},l=new Set,m=new Set,d=Object(u.a)(r);try{for(d.s();!(t=d.n()).done;){var h=t.value,v=S()(h[0],"YYYY-MM-DD").format("M/DD/YY");l.add(v),h[0]=v;var f=s(h);m.add(f),h[1]=f}}catch(V){d.e(V)}finally{d.f()}var p=Array.from(l).sort((function(e,t){return e.localeCompare(t)}));p.shift();var b,y=Object(u.a)(m);try{for(y.s();!(b=y.n()).done;){var k=b.value;n[k]=Array.from({length:p.length},(function(e){return""})),c[k]=Array.from({length:p.length},(function(e){return""}))}}catch(V){y.e(V)}finally{y.f()}var E={};p.forEach((function(e,t){return E[e]=t}));var g,C=Object(u.a)(r);try{for(C.s();!(g=C.n()).done;){var O=g.value,N=O[0],w=O[1],j=E[N];c[w][j]=O[i],n[w][j]=O[o]}}catch(V){C.e(V)}finally{C.f()}return{timestamps:p,deaths:n,confirmed:c}}function P(e){var t=Object(l.a)(e,4),a=t[0],n=t[1],c=t[2],r=t[3],i=Object(m.a)({},a.data,{},c.deaths,{},r.deaths),o=Object(m.a)({},n.data,{},c.confirmed,{},r.confirmed),s=Object.keys(i),u=e.sort((function(e,t){return t.timestamps.length-e.timestamps.length}))[0].timestamps;return{allLocations:s,deaths:{rows:i,header:u,data:[]},confirmed:{rows:o,header:u,data:[]},loading:!1}}function U(){return Promise.all([window.fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv").then((function(e){return e.text()})).then((function(e){return L(e)})).then((function(e){return I(e)})),window.fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv").then((function(e){return e.text()})).then((function(e){return L(e)})).then((function(e){return I(e)})),window.fetch("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv").then((function(e){return e.text()})).then((function(e){return L(e)})).then((function(e){return T(e)})),window.fetch("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv").then((function(e){return e.text()})).then((function(e){return L(e)})).then((function(e){return T(e,!0)}))]).then(P)}a(391);i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:x}),c.a.createElement(s.a,{to:"/"})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.8cfdb066.chunk.js.map